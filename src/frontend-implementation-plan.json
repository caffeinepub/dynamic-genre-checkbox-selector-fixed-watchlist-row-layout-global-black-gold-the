{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Manga list: add completion-only filter and extend sort options",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add a \"Complete only\" checkbox to the existing floating filter panel that filters the list to entries with completed === true and composes with existing filters.",
      "acceptanceCriteria": [
        "A new checkbox is visible in the existing floating controls/filter panel with the label \"Complete only\".",
        "When the checkbox is checked, the list shows only entries where `entry.completed === true`.",
        "When the checkbox is unchecked, entries are not filtered by completion status.",
        "The completion filter composes correctly with existing filters (title/synopsis/notes search, genre selection, and bookmarked-only).",
        "Toggling the completion checkbox updates the list immediately without requiring a page reload."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/manga/MangaListControls.tsx",
          "operation": "modify",
          "description": "Extend the controls props to accept `completedOnly` + `onCompletedOnlyChange`, and render a new Checkbox control labeled \"Complete only\" within the existing filter/controls area. Use the existing shadcn/ui Checkbox already imported; do not modify files under frontend/src/components/ui."
        },
        {
          "path": "frontend/src/components/manga/FloatingControlsPanel.tsx",
          "operation": "modify",
          "description": "Plumb `completedOnly` and `onCompletedOnlyChange` through FloatingControlsPanel props and into MangaListControls so the new filter is visible in the existing floating panel."
        },
        {
          "path": "frontend/src/components/manga/MangaListPage.tsx",
          "operation": "modify",
          "description": "Add `completedOnly` state, pass it down to FloatingControlsPanel, and update the `filteredAndSortedEntries` memo to filter entries by `entry.completed === true` when enabled. Ensure `hasFilters` reflects the completion filter so the empty-state messaging stays accurate, and include `completedOnly` in memo dependencies / width recalculation inputs so the list updates immediately."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Extend the \"Sort By\" selector with \"Title (Z–A)\" and \"Rating (Low–High)\" and apply sorting to the full filtered set before pagination.",
      "acceptanceCriteria": [
        "The \"Sort By\" dropdown includes at least these options: \"Title (A–Z)\", \"Title (Z–A)\", \"Rating (High–Low)\", and \"Rating (Low–High)\".",
        "Selecting \"Title (Z–A)\" sorts entries by title descending (Z to A).",
        "Selecting \"Rating (Low–High)\" sorts entries by rating ascending (lowest to highest).",
        "Existing sort options continue to work as before.",
        "Sorting applies to the full filtered result set before pagination is applied."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/manga/MangaListControls.tsx",
          "operation": "modify",
          "description": "Update the `sortBy` prop union type and Select options to support four values (Title A–Z, Title Z–A, Rating High–Low, Rating Low–High). Keep using existing Select components (do not edit frontend/src/components/ui). Ensure labels match the acceptance criteria."
        },
        {
          "path": "frontend/src/components/manga/MangaListPage.tsx",
          "operation": "modify",
          "description": "Update `sortBy` state type/default and adjust the sorting branch inside `filteredAndSortedEntries` to implement title descending and rating ascending options while preserving existing title ascending and rating descending behavior. Confirm sorting occurs prior to the existing pagination slice so it applies to the full filtered set."
        },
        {
          "path": "frontend/src/components/manga/FloatingControlsPanel.tsx",
          "operation": "modify",
          "description": "Update the `sortBy`/`onSortByChange` prop types passed through FloatingControlsPanel to match the expanded sort option union, ensuring the new sort options remain wired into the existing floating panel UI."
        }
      ]
    }
  ]
}