{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Stabilize Add Manga dialog layout and guard submission until actor is ready",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Restructure the Add Manga dialog into a stable flex column (header + scrollable body + fixed footer) so footer buttons remain clickable with no overlapping layers.",
      "acceptanceCriteria": [
        "In the Add Manga dialog, after filling in fields (including cover image URL/file upload, genres, notes, etc.), the \"Add Manga\" button is clickable and triggers submission.",
        "No UI element overlays the dialog footer buttons; pointer interactions on Cancel/Add Manga always work.",
        "Only the dialog body content scrolls; the footer stays visible and does not overlap with scrollable content."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/manga/AddMangaDialog.tsx",
          "operation": "modify",
          "description": "Refactor the DialogContent/form layout to a predictable flex-column structure: make DialogContent a fixed-height flex container, make the form fill available height, and constrain the ScrollArea to only the body region (using flex-1/min-h-0 patterns) while keeping DialogFooter outside the scrollable region with appropriate stacking/background to prevent overlay/pointer-event issues. Ensure no max-height on the body causes it to overlap the footer."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Prevent Add Manga submission while the backend actor is still initializing and replace the raw \"Actor not available\" error with clear English UI feedback.",
      "acceptanceCriteria": [
        "Attempting to submit a new manga while the actor is still initializing does not throw or display the raw error \"Actor not available\".",
        "The Add Manga submit button is disabled when the actor is not ready, and the dialog shows an English message indicating it is connecting/loading (exact wording up to implementation, but must be clear).",
        "Once the actor becomes available, submission works without requiring a page refresh."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/manga/AddMangaDialog.tsx",
          "operation": "modify",
          "description": "Use the existing actor readiness state from the app (via useActor) to gate submission: disable the submit button and block handleSubmit from calling the mutation when actor is null or still fetching. Add a visible, English helper message within the dialog when connecting/loading so the user understands why submission is disabled. Ensure the dialog updates automatically when the actor becomes available."
        },
        {
          "path": "frontend/src/hooks/useMangaMutations.ts",
          "operation": "modify",
          "description": "Harden the add-manga mutation to avoid surfacing the raw \"Actor not available\" string: when actor is null, throw a user-friendly, English error message aligned with the dialogâ€™s connecting/loading state, and ensure the mutation function cannot proceed without an actor reference."
        }
      ]
    }
  ]
}