{
  "kind": "build_request",
  "title": "Constrain Add Manga dialog body to 600px with fixed header/footer, and harden backend connection reliability",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the Add Manga dialog layout so the dialog body (the middle content area containing the form fields) has a maximum height of 600px and scrolls vertically, while the dialog header (title/description/alerts) and footer (Cancel/Add Manga buttons) remain fixed and always visible.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "give the inner body of the 'add manga' popup window a max height of 600 pixels and enable vertical scrolling. make the header and footer stay fixed, and the middle area scrolls normally."
        ]
      },
      "acceptanceCriteria": [
        "When the Add Manga dialog is open, the header area stays visible at the top while scrolling the form fields.",
        "When the Add Manga dialog is open, the footer action buttons stay visible at the bottom while scrolling the form fields.",
        "The scrollable middle area has max-height: 600px (and uses vertical scrolling when content exceeds this height).",
        "Scrolling inside the dialog scrolls only the dialog body (not the page behind the modal).",
        "The layout remains usable on small viewports (mobile + small laptop) without introducing horizontal scrolling."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add a new frontend stability pass to reduce recurring backend connection/actor readiness errors by improving readiness gating, retries, and recovery actions across the existing actor/readiness hooks and the manga list + add-manga flows.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "also i am getting backend connection errors again. add all the fixes you can think of right now like you did before to fix it."
        ]
      },
      "acceptanceCriteria": [
        "Backend readiness checks do not enter a failed state solely because the actor is temporarily null/uninitialized during startup; instead the UI remains in a connecting/waiting state until the actor exists.",
        "Retrying a backend connection from the UI triggers a full recovery attempt (including re-checking readiness and forcing a refresh/refetch of the actor query as needed), not just re-running the readiness check against a stale/missing actor.",
        "Error messaging distinguishes at minimum: (a) connecting/initializing, (b) transient network issues, and (c) authorization-required cases, and does not incorrectly label initialization states as permanent failures.",
        "Manga list loading, pagination changes, and add-manga submission remain gated on backend readiness and do not spam failing requests during reconnect scenarios.",
        "After a successful reconnect (readiness becomes ready), previously blocked operations (loading list, opening Add Manga, submitting Add Manga) work without requiring a full page reload."
      ]
    }
  ],
  "constraints": [
    "Do not edit any files under frontend/src/components/ui (shadcn/ui components must be composed, not modified).",
    "Do not edit immutable hook files listed in SYSTEM_CONTEXT (e.g., frontend/src/hooks/useActor.ts and frontend/src/hooks/useInternetIdentity.ts). Any additional robustness must be implemented via non-immutable wrapper logic."
  ],
  "nonGoals": [
    "Do not change the backend data model or add new backend features unrelated to connection/readiness stability.",
    "Do not redesign the Add Manga form fields or validation logic beyond the scrolling/fixed header-footer layout change."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}